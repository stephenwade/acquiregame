<link rel="import" href="./tile-view.html">

<template id="playerView">
  <style>
    html, body, :host {
      display: block;
      
      width: 100%;
      height: 100%;
      padding: 0;
      margin: 0;
      
      overflow: hidden;
    }
    
    #tiles {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      
      margin: 1em;
    }
    
    tile-view {
      width: 15%;
      height: 15vw;
      
      font-size: 4vw;
    }
  </style>
  
  <div id="tiles"></div>
  <div id="portfolio"></div>
</template>

<script>
  'use strict';
  
  (() => {
    let template = document.currentScript.ownerDocument.querySelector('#playerView');
    let prototype = Object.create(HTMLElement.prototype);
    
    Object.assign(prototype, {
      createdCallback() {
        this.root = this.createShadowRoot();
        this.root.appendChild(document.importNode(template.content, true));
        
        //this.hand = [];
      },
      
      attachedCallback() {
        var self = this;
        
        socket.on('new tiles', (tiles) => { self.addTiles(tiles) });
      },
      
      detachedCallback() {
      },
      
      addTiles(tiles) {
        for (let tile of tiles) {
          //this.hand.push(tile);
          console.log(tile);
          
          var view = new TileView();
          view.setTile(tile);
          var rack = this.root.querySelector('#tiles');
          rack.appendChild(view);
        }
      }
    });
    
    window.AcquirePlayerPage = document.registerElement('acquire-player-page', { prototype });
  })();
</script>
